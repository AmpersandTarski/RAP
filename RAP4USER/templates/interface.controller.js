/*
Controller for interface "$interfaceName$" (context: "$contextName$"). Generated code, edit with care.
$if(verbose)$Generated using template: $usedTemplate$
Generated by $ampersandVersionStr$

INTERFACE "$interfaceName$" : $expAdl$ :: $source$ * $target$ $if(exprIsUni)$[UNI]$endif$
Roles: [$roles;separator=", "$]
$endif$*/
/* jshint ignore:start */
angular.module('AmpersandApp').controller('Ifc$interfaceName$Controller', function (\$scope, \$route, \$routeParams, ResourceService, \$location) {
    const resourceType = '$source$';
    const ifcName = '$interfaceName$';
    let resourceId;
    let resourcePath;
    let tgtId;

    // Input params
    if(resourceType == 'SESSION') {
        resourceId = '1';
        resourcePath = 'resource/SESSION/1';
        tgtId = \$routeParams.resourceId; // if resourceId is specified, it is interpreted as to retreive a single tgt. Can be undefined
    } else {
        resourceId = \$routeParams.resourceId;
        resourcePath = 'resource/' + resourceType + '/' + \$routeParams.resourceId;
        tgtId = undefined;
    }

    \$scope.resource = {
        _id_ : resourceId,
        _path_ : resourcePath,
        _isRoot_ : true,
        [ifcName] : $if(exprIsUni)$null$else$[]$endif$, // placeholder for interface data
        get : function(tgtId) {
            ResourceService.getResource(this, ifcName, this, tgtId);
        },
        save : function() {
            ResourceService.patchResource(this, true);
        }
    };
    
    \$scope.patchResource = \$scope.resource;
    
    // Controller functions
    \$scope.switchResource = function(resourceId) {
        \$location.url('/$interfaceName$/' + resourceId);
    };
    
    // Get resource
    \$scope.resource.get(tgtId);
});
/* jshint ignore:end */